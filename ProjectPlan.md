### CareVault POC — Step-by-Step Execution Guide

*(Each step spells out **what** outcome you need and **why** it matters. Your AI-coder teammate will fill in the “how.”)*

| Step                                               | Why it exists                                                                                                                                                                  | What success looks like                                                                                                               |
| -------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------- |
| **1  — Workspace Bootstrap**                       | A clean monorepo keeps web and API code version-locked yet independent. Turbo + pnpm enables blazing dev loops; **uv** gives deterministic Python installs.                    | • Git repo with `/packages/frontend` and `/packages/api` folders<br>• `pnpm install` and `uv pip install` both finish without warnings     |
| **2  — Web App Scaffolding (Next.js 15)**          | React 19 and App Router give server-components and server actions—perfect for SSR + API calls without extra fetch code. It also mirrors how you’ll eventually deploy.          | • App starts on `localhost:3000` showing a placeholder landing page<br>• Tailwind & shadcn/ui ready for rapid UI composition          |
| **3  — Auth Flow (Credentials-only for POC)**      | Even a demo needs role separation (patient vs doctor). Credentials are the quickest way without wiring OAuth.                                                                  | • Login screen authenticates two hard-coded users<br>• Post-login redirect lands on role-specific dashboard                           |
| **4  — Database Foundation (SQLite + SQLAlchemy)** | Local file DB keeps the stack zero-ops while still exercising real relational queries. Models you define today can migrate to Postgres untouched.                              | • `carevault.db` file is created on first run<br>• ORM models and Alembic migration directory compiled                                |
| **5  — Core Domain Models**                        | Clear entities (User, Patient, Doctor, Appointment, Prescription, ShareToken) force the data contract early, preventing API churn later.                                       | • ER diagram docs committed<br>• Automated migration applies without error                                                            |
| **6  — API Layer (FastAPI 0.115)**                 | FastAPI gives automatic OpenAPI docs, async routes, and easy dependency injection. It’s also the natural host for Python-centric AI calls.                                     | • Swagger UI reachable at `/docs`<br>• CRUD endpoints for Patient, Doctor, Appointment respond with sample data                       |
| **7  — AI Interaction Service**                    | Validates the “intelligent” claim: combining deterministic drug-interaction lookup (RxNav) with LLM summarization (GPT-4o-mini). Keeps the AI codepath isolated for swap-outs. | • Route `/ai/check` returns JSON: `{issues:[…], summary:"…"}` for a dummy med list<br>• Simulated latency ≤1 s locally                |
| **8  — Doctor Workflow UI**                        | This is the flagship user journey: doctor books appointment, writes prescription, sees AI feedback, confirms, and emits a QR/PDF.                                              | • Form UX with auto-suggest meds<br>• On submit, AI summary is displayed and “Save” persists record                                   |
| **9  — PDF + QR Generation Service**               | Demonstrates secure shareability. QR must open a **read-only** public page; PDF proves downstream pharmacy compatibility.                                                      | • Clicking “Generate” downloads a PDF file to disk<br>• Scanning QR in phone browser shows the prescription without auth              |
| **10  — Patient Dashboard**                        | Validates bidirectional flow and token revocation logic.                                                                                                                       | • Patient sees list of visits and a toggle to disable any QR<br>• Disabled token returns 403 when scanned                             |
| **11  — Unified Dev Runner**                       | One command (`pnpm dev`) should spin up everything so reviewers don’t juggle terminals.                                                                                        | • Concurrency script starts both servers; CTRL-C tears them down cleanly                                                              |
| **12  — Testing & QA Hooks**                       | Early automated tests stop regressions as features iterate.                                                                                                                    | • Unit tests cover AI service, QR generator, and critical React components<br>• Single Playwright happy-path script passes end-to-end |
| **13  — Docs & Onboarding**                        | Even a POC needs a 5-minute setup path for PMs & investors.                                                                                                                    | • `README.md` with prerequisites, env vars, and “Quick Start” steps<br>• Short Loom (or Markdown GIF) showing doctor→patient→QR flow  |

---

### Key Principles to Remember

1. **Keep everything local and inspectable.** Debugging a SQLite file and local LLM call is faster than chasing logs in the cloud.
2. **Separate “smart” code from CRUD code.** AI failures shouldn’t break basic record keeping.
3. **Ship thin vertical slices.** After Step 8 works, the demo already tells a compelling story; later steps harden it.

Follow the table row by row. When each “success looks like” bullet is true, move on. This keeps scope tight while proving every critical feature of CareVault.
